<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Сотрудники</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link href="../static/css/adminmain.css" th:href="@{/css/adminmain.css}" rel="stylesheet" />
</head>
<body>
<adminheader th:insert="adminheader::adminheader"></adminheader>
<div class="form3">
    <h4 class="mb-3">Список сотрудников</h4>
    <form method="post">
        <div class="row g-3">
            <div class="col-sm-3">
                <label class="form-label">Номер</label>
                <input type="text" class="form-control" placeholder=""id="idd"name="idd" onchange="setUser()" required="">
                <script th:inline="javascript">
                    function setUser(){
                        var vusers = [[${employees}]];
                        let i;
                        for(i=0;i<vusers.length;i++) {
                            if(vusers[i].userId==document.getElementById("idd").value) {
                                document.getElementById("firstname").value =vusers[i].firstName;
                                document.getElementById("lastname").value = vusers[i].lastName;
                                document.getElementById("middlename").value=vusers[i].middleName;
                                document.getElementById("post").value=vusers[i].post.post;
                                document.getElementById("login").value=vusers[i].login;
                                document.getElementById("password").value=vusers[i].password;
                                document.getElementById("postid").value = vusers[i].post.postId;
                                document.getElementById("hidden").value = document.getElementById("idd").value;
                                break;
                            }
                        }
                        if(i==vusers.length){
                            document.getElementById("firstname").value ="";
                            document.getElementById("lastname").value = "";
                            document.getElementById("middlename").value="";
                            document.getElementById("post").value="";
                            document.getElementById("login").value="";
                            document.getElementById("hidden").value = "";
                            document.getElementById("password").value = "";
                            document.getElementById("postid").value = "0";
                        }
                    }
                </script>
                <div class="invalid-feedback">
                    Valid first name is required.
                </div>
            </div>
            <input type="text" id="postid" name="postid" class="hidden">
            <div class="col-sm-3">
                <label  class="form-label">Фамилия</label>
                <input type="text" class="form-control" placeholder=""id="firstname"name="firstname"  required="">
                <div class="invalid-feedback">
                    Valid first name is required.
                </div>
            </div>
            <div class="col-sm-3">
                <label class="form-label">Имя</label>
                <input type="text" class="form-control" placeholder=""id="lastname"name="lastname"  required="">
                <div class="invalid-feedback">
                    Valid first name is required.
                </div>
            </div>
            <div class="col-sm-3">
                <label class="form-label">Отчество</label>
                <input type="text" class="form-control" placeholder=""id="middlename"name="middlename"  required="">
                <div class="invalid-feedback">
                    Valid first name is required.
                </div>
            </div>
            <div class="col-sm-4">
                <label class="form-label">Должность</label>
                <input type="text" class="form-control" placeholder=""id="post"name="post"  required="">
                <div class="invalid-feedback">
                    Valid first name is required.
                </div>
            </div>
            <div class="col-sm-4">
                <label class="form-label">Логин</label>
                <input type="text" class="form-control" placeholder=""id="login"name="login"  required="">
                <div class="invalid-feedback">
                    Valid first name is required.
                </div>
            </div>
            <div class="col-sm-4">
                <label class="form-label">Пароль</label>
                <input type="text" class="form-control" placeholder=""id="password"name="password"  required="">
                <div class="invalid-feedback">
                    Valid first name is required.
                </div>
            </div>
            <hr class="my-4">
            <div class="col-sm-4"></div>
            <div class="col-sm-4">
                <button class="w-100 btn btn-primary btn-lg" type="submit" >Добавить/Редактировать</button>
                <div class="invalid-feedback">
                    Valid last name is required.
                </div>
            </div>
            <div class="col-sm-4"></div>
        </div>
    </form>
    <br>
    <form method="post" th:action="'/user/delete/'+${user.userId}">
        <div class="row g-3">
            <div class="col-sm-4"></div>
            <div class="col-sm-4">
                <input class="hidden" type="text" id="hidden" name="hidden">
                <button class="w-100 btn btn-primary btn-lg" type="">Удалить</button>
                <div class="invalid-feedback">
                    Valid last name is required.
                </div>
            </div>
            <div class="col-sm-4"></div>
        </div>
    </form>
    <hr class="my-4">
</div>
<employeestable th:insert="employeestable::employeestable"></employeestable>
</body>
</html>