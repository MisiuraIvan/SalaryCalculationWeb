<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Должности</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link href="../static/css/adminmain.css" th:href="@{/css/adminmain.css}" rel="stylesheet" />
</head>
<body>
<adminheader th:insert="adminheader::adminheader"></adminheader>
<div class="form3">
    <h4 class="mb-3">Список должностей</h4>
    <form method="post">
        <div class="row g-3">
        <div class="col-sm-4">
            <label class="form-label">Номер</label>
            <input type="text" class="form-control" placeholder=""id="idd"name="idd" onchange="setPost()" required="">
            <script th:inline="javascript">
                function setPost(){
                    var vposts = [[${posts}]];
                    let i;
                    for(i=0;i<vposts.length;i++) {
                        if(vposts[i].postId== document.getElementById("idd").value) {
                            document.getElementById("post").value =vposts[i].post;
                            document.getElementById("oklad").value = vposts[i].oklad;
                            document.getElementById("hidden").value = document.getElementById("idd").value;
                            break;
                        }
                    }
                    if(i==vposts.length){
                        document.getElementById("post").value = "";
                        document.getElementById("oklad").value = "";
                        document.getElementById("hidden").value = "";
                    }
                }
            </script>
            <div class="invalid-feedback">
                Valid first name is required.
            </div>
        </div>
        <div class="col-sm-4">
            <label  class="form-label">Должность</label>
            <input type="text" class="form-control" placeholder=""id="post"name="post"  required="">
            <div class="invalid-feedback">
                Valid first name is required.
            </div>
        </div>
        <div class="col-sm-4">
            <label class="form-label">Оклад</label>
            <input type="text" class="form-control" placeholder=""id="oklad"name="oklad"  required="">
            <div class="invalid-feedback">
                Valid first name is required.
            </div>
        </div>
            <hr class="my-4">
            <div class="col-sm-4"></div>
        <div class="col-sm-4">
            <button class="w-100 btn btn-primary btn-lg" type="submit" >Добавить/Редактировать</button>
            <div class="invalid-feedback">
                Valid last name is required.
            </div>
        </div>
            <div class="col-sm-4"></div>
        </div>
            </form>
    <br>
            <form method="post" th:action="'/post/delete/'+${user.userId}">
                <div class="row g-3">
                    <div class="col-sm-4"></div>
        <div class="col-sm-4">
                <input class="hidden" type="text" id="hidden" name="hidden">
                <button class="w-100 btn btn-primary btn-lg" type="">Удалить</button>
            <div class="invalid-feedback">
                Valid last name is required.
            </div>
        </div>
                    <div class="col-sm-4"></div>
                </div>
            </form>
            <hr class="my-4">
</div>
<table class="table table-striped poststable">
    <thead>
    <tr>
        <th scope="col">#</th>
        <th scope="col">Должность</th>
        <th scope="col">Оклад</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="el:${posts}">
        <th th:text="${el.postId}" scope="row"></th>
        <th th:text="${el.post}"></th>
        <th th:text="${el.oklad}"></th>
    </tr>
    </tbody>
</table>
</body>
</html>